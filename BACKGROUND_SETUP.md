# 后台播放功能配置指南

## 📱 启用后台播放

为了使PDF TTS阅读器支持后台播放（关屏听书），需要在Xcode中配置Background Modes。

### 配置步骤

1. **打开Xcode项目**
   - 打开 `PDFtts.xcodeproj`

2. **选择Target**
   - 在左侧项目导航器中选择 `PDFtts` 项目
   - 选择 `PDFtts` target

3. **启用Background Modes**
   - 点击 `Signing & Capabilities` 选项卡
   - 点击 `+ Capability` 按钮
   - 搜索并添加 `Background Modes`

4. **选择Audio模式**
   - 在新添加的 `Background Modes` 部分
   - 勾选 `☑️ Audio, AirPlay, and Picture in Picture`

5. **验证配置**
   - 确保 `Background Modes` 已启用
   - 确保 `Audio, AirPlay, and Picture in Picture` 已勾选

### 功能说明

启用后台播放后，用户可以：

- 🌙 **关屏听书**：锁屏后音频继续播放
- 🎛️ **锁屏控制**：在锁屏界面控制播放/暂停/停止
- 🔄 **自动翻页**：后台状态下仍支持自动翻页
- 📱 **控制中心**：在控制中心快速控制播放
- 🎧 **音频中断处理**：自动处理电话、其他应用的音频中断

### 锁屏界面显示

配置完成后，锁屏界面将显示：
- 📖 **标题**：PDF阅读器
- 📄 **艺术家**：第 X 页
- 🎵 **专辑**：TTS朗读
- 🗣️ **语言**：中文朗读 / English Reading
- 📝 **当前文本**：正在朗读的文本内容（前100字符）

### 注意事项

- ⚠️ **权限要求**：需要用户同意后台播放权限
- 🔋 **电池消耗**：后台播放会增加电池消耗
- 📶 **网络要求**：TTS需要网络连接，建议使用WiFi
- 💾 **内存管理**：长时间后台播放可能会被系统回收

### 测试方法

1. 启动PDF阅读器
2. 选择语言并开始朗读
3. 按Home键或锁屏
4. 验证音频继续播放
5. 在锁屏界面控制播放
6. 测试自动翻页功能

---

*配置完成后，用户就可以安心在睡前听书了！ 🌙*